const m=document.getElementById("loader"),y=()=>{document.querySelectorAll(".reveal").forEach(e=>{e.getBoundingClientRect().top<window.innerHeight*.8&&e.classList.add("visible")})};let a=!1;const h=()=>{a||(requestAnimationFrame(()=>{document.getElementById("topBtn").classList.toggle("show",window.scrollY>400),y(),a=!1}),a=!0)},u=()=>{setTimeout(()=>{m.classList.add("hidden"),setTimeout(()=>m.remove(),400)},800),window.addEventListener("scroll",h,{passive:!0}),document.getElementById("topBtn").addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),y()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();const f=()=>{document.querySelectorAll("img[data-critical]").forEach(o=>{const t=o;t.dataset.src&&(t.src=t.dataset.src)})};requestIdleCallback?requestIdleCallback(f):setTimeout(f,100);const l=document.getElementById("navbar"),i=document.getElementById("mobile-toggle"),s=document.getElementById("mobile-menu"),p=document.querySelectorAll(".mobile-nav-link");let v=0,r=!1;function w(){const e=window.scrollY;e>50?l?.classList.add("scrolled"):l?.classList.remove("scrolled"),e>v&&e>100?l?.style.setProperty("transform","translateY(-100%)"):l?.style.setProperty("transform","translateY(0)"),v=e,r=!1}function b(){r||(requestAnimationFrame(w),r=!0)}window.addEventListener("scroll",b,{passive:!0});i?.addEventListener("click",()=>{i.classList.contains("active")?c():k()});function k(){i?.classList.add("active"),s?.classList.add("active"),document.body.style.overflow="hidden"}function c(){i?.classList.remove("active"),s?.classList.remove("active"),document.body.style.overflow=""}s?.addEventListener("click",e=>{e.target===s&&c()});document.addEventListener("click",e=>{if(s?.classList.contains("active")){const t=s.querySelector("div > div")?.contains(e.target),n=i?.contains(e.target);!t&&!n&&c()}});p.forEach(e=>{e.addEventListener("click",c)});const B=document.getElementById("mobile-close");B?.addEventListener("click",c);document.addEventListener("keydown",e=>{e.key==="Escape"&&s?.classList.contains("active")&&c()});const I=["story","experience","gallery","stay","contact"],g=document.querySelectorAll(".nav-link");function q(){const e=window.scrollY+100;I.forEach((o,t)=>{const n=document.getElementById(o);if(n){const d=n.offsetTop,L=d+n.offsetHeight;e>=d&&e<L&&(g.forEach(E=>E.classList.remove("active")),g[t]?.classList.add("active"))}})}window.addEventListener("scroll",q,{passive:!0});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(o){o.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const n=t.offsetTop-100;window.scrollTo({top:n,behavior:"smooth"})}})});
